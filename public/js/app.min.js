app||(app={}),function(e,t,i){app.MachineModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("maquinas.index"))},idAttribute:"id",defaults:{maquina_serie:"",maquina_ubicacion:"",maquina_casillas:0,maquina_contacto:"",maquina_telefono:"",maquina_direccion:"",maquina_email:"",maquina_documentos:"",maquina_servidor:"",maquina_usuario:"","maquina_contraseña":"",maquina_directorio:"",maquina_ultima:"",maquina_comision1:0,maquina_comision2:0,maquina_comision3:0}})}(this,this.document),app||(app={}),function(e,t,i){app.ModuloModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("roles.permisos.index"))},idAttribute:"id",defaults:{name:"",display_name:"",nivel1:"",nivel2:"",nivel3:"",nivel4:""}})}(this,this.document),app||(app={}),function(e,t,i){app.RolModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("roles.index"))},idAttribute:"id",defaults:{name:"",display_name:"",description:"",permissions:[]}})}(this,this.document),app||(app={}),function(e,t,i){app.UserModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("usuarios.index"))},idAttribute:"id",defaults:{user_name:"",user_lastname:"",user_address:"",user_email:"",user_telephone:"",username:"",password:""}})}(this,this.document),app||(app={}),function(e,t,i){app.UsuarioRolModel=Backbone.Model.extend({urlRoot:function(){return e.Misc.urlFull(Route.route("usuarios.roles.index"))},idAttribute:"id",defaults:{user_id:"",role_id:""}})}(this,this.document),app||(app={}),function(e,t,i){app.PermisosRolList=Backbone.Collection.extend({url:function(){return e.Misc.urlFull(Route.route("roles.permisos.index"))},model:app.ModuloModel,initialize:function(){}})}(this,this.document),app||(app={}),function(e,t,i){app.RolList=Backbone.Collection.extend({url:function(){return e.Misc.urlFull(Route.route("usuarios.roles.index"))},model:app.UsuarioRolModel,initialize:function(){}})}(this,this.document),app||(app={}),function(e,t,i,n){app.MainBillsView=Backbone.View.extend({el:"#bills-main",initialize:function(){this.$billsSearchTable=this.$("#bills-search-table"),this.$billsSearchTable.DataTable({processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:{url:t.Misc.urlFull(Route.route("facturas.index")),data:function(e){e.datatables=!0}},columns:[{data:"factura_numero",name:"factura_numero"},{data:"factura_prefijo",name:"factura_prefijo"},{data:"maquina_serie",name:"factura_maquina"},{data:"factura_fecha_emision",name:"factura_fecha_emision"},{data:"factura_total",name:"factura_total"}],columnDefs:[{targets:0,render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("facturas.show",{facturas:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainBinnaclesView=Backbone.View.extend({el:"#binnacles-main",initialize:function(){this.$binnaclesSearchTable=this.$("#binnacles-search-table"),this.$binnaclesSearchTable.DataTable({processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:{url:t.Misc.urlFull(Route.route("bitacoras.index"))},columns:[{data:"id",name:"id"},{data:"bitacora_usuario",name:"bitacora_usuario"},{data:"bitacora_accion",name:"bitacora_accion"},{data:"bitacora_observaciones",name:"bitacora_observaciones"},{data:"bitacora_fh",name:"bitacora_fh"}],columnDefs:[{targets:0,render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("bitacoras.show",{bitacoras:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainCoinsView=Backbone.View.extend({el:"#coins-main",initialize:function(){this.$coinsSearchTable=this.$("#coins-search-table"),this.$coinsSearchTable.DataTable({processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:t.Misc.urlFull(Route.route("monedas.index")),columns:[{data:"id",name:"id"},{data:"maquina_serie",name:"moneda_maquina"},{data:"moneda_canal",name:"moneda_canal"},{data:"moneda_denominacion",name:"moneda_denominacion"},{data:"moneda_hopper",name:"moneda_hopper"}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainCoinsCasketView=Backbone.View.extend({el:"#coinscasket-main",initialize:function(){this.$coinsCaskedSearchTable=this.$("#coinscasket-search-table"),this.$coinsCaskedSearchTable.DataTable({processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:t.Misc.urlFull(Route.route("monedascofres.index")),columns:[{data:"id",name:"id"},{data:"maquina_serie",name:"coin_maquina"},{data:"coin_canal",name:"coin_canal"},{data:"coin_denominacion",name:"coin_denominacion"},{data:"coin_cofre",name:"coin_cofre"}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.ComponentGlobalView=Backbone.View.extend({el:"body",events:{"click .sidebar-toggle":"clickSidebar"},initialize:function(){},clickSidebar:function(e){e.preventDefault();var t=new Date;t.setFullYear(t.getFullYear()+1),i.cookie="sidebar_toggle="+(this.$el.hasClass("sidebar-collapse")?"":"sidebar-collapse")+"; path=/; expires="+t.toUTCString()}})}(jQuery,0,this.document),app||(app={}),function(e,t,i,n){app.ComponentReportView=Backbone.View.extend({el:"body",events:{"click .btn-export-pdf-koi-component":"onPdf","click .btn-export-xls-koi-component":"onXls"},initialize:function(){},onPdf:function(e){this.$("#type-report-koi-component").val("pdf")},onXls:function(e){this.$("#type-report-koi-component").val("xls")}})}(jQuery,0,this.document),app||(app={}),function(e,t,i,n){app.DashboardView=Backbone.View.extend({el:"#dashboard-main",templateCharts:_.template(e("#charts-dashboard-tpl").html()||""),events:{"change .change-view-for-machine":"changeViewMachine"},initialize:function(){this.$("#body-charts").html(this.templateCharts);var e=this.$("#dashboard_machine_filter").val();this.referenceCharts(e)},changeViewMachine:function(e){this.initialize()},referenceCharts:function(i){var n=this;e.ajax({url:t.Misc.urlFull(Route.route("dashboard.charts")),type:"GET",data:{machine:i}}).done(function(e){if(!_.isUndefined(e.success)){var i=e.success?"":e.errors;if(_.isObject(e.errors)&&(i=t.Misc.parseErrors(e.errors)),!e.success)return void alertify.error(i);n.chart_rotacion_dia(e.object.chart_rotacion_dia),n.chart_rotacion_smeses(e.object.chart_rotacion_smeses),n.chart_ventas_smeses(e.object.chart_ventas_smeses)}}).fail(function(e,t,i){alertify.error(i)})},chart_rotacion_dia:function(e){var t=this.$("#chart_rotacion_dia");new Chart(t,{type:"bar",data:{labels:e.labels,datasets:[{label:"# Rotación",data:e.data,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},chart_rotacion_smeses:function(e){var t=this.$("#chart_rotacion_smeses");new Chart(t,{type:"bar",data:{labels:e.labels,datasets:[{label:"# Rotación",data:e.data,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]},options:{responsive:!0,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},chart_ventas_smeses:function(e){var i=this.$("#chart_ventas");new Chart(i,{type:"bar",data:{labels:e.labels,datasets:[{label:"Subtotal",data:e.data.subtotal,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1},{label:"Iva",data:e.data.iva,backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1},{label:"Comisiones",data:e.data.comisiones,backgroundColor:"rgba(255, 206, 86, 0.2)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1}]},options:{responsive:!0,tooltips:{callbacks:{label:function(e,i){return i.datasets[e.datasetIndex].label+": "+t.Misc.currency(e.yLabel)}}},scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e,i,n){return t.Misc.currency(e)}}}]}}})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainFinishedView=Backbone.View.extend({el:"#finished-main",initialize:function(){this.$finishedSearchTable=this.$("#finished-search-table"),this.$finishedSearchTable.DataTable({processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:t.Misc.urlFull(Route.route("finalizados.index")),columns:[{data:"id",name:"id"},{data:"maquina_serie",name:"finalizado_maquina"},{data:"finalizado_casilla",name:"finalizado_casilla"},{data:"finalizado_finicio",name:"finalizado_finicio"},{data:"finalizado_ffinal",name:"finalizado_ffinal"}],columnDefs:[{targets:0,render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("finalizados.show",{finalizados:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.UserLoginView=Backbone.View.extend({el:"#login-box",initialize:function(){this.$loginForm=e("#form-login-account"),this.$loginForm.validator()},render:function(){}})}(jQuery,0,this.document),app||(app={}),function(e,t,i,n){app.CreateMachineView=Backbone.View.extend({el:"#machine-create",template:_.template(e("#add-machine-tpl").html()||""),events:{"submit #form-machine":"onStore"},initialize:function(){this.$wraperForm=this.$("#render-form-machine"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.model.save(i,{patch:!0,silent:!0})}},render:function(){var e=this.model.toJSON();this.$wraperForm.html(this.template(e)),this.ready()},ready:function(){"function"==typeof t.initComponent.initValidator&&t.initComponent.initValidator(),"function"==typeof t.initComponent.initToUpper&&t.initComponent.initToUpper(),"function"==typeof t.initComponent.initSpinner&&t.initComponent.initSpinner(),"function"==typeof t.initComponent.initInputMask&&t.initComponent.initInputMask()},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.el)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.el),!_.isUndefined(i.success)){var a=i.success?"":i.errors;if(_.isObject(i.errors)&&(a=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(a);t.Misc.redirect(t.Misc.urlFull(Route.route("maquinas.index")))}}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainMachinesView=Backbone.View.extend({el:"#machines-main",initialize:function(){this.$machinesSearchTable=this.$("#machines-search-table"),this.$machinesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:t.Misc.urlFull(Route.route("maquinas.index")),columns:[{data:"maquina_serie",name:"maquina_serie"},{data:"maquina_casillas",name:"maquina_casillas"},{data:"maquina_ubicacion",name:"maquina_ubicacion"},{data:"maquina_email",name:"maquina_email"},{data:"maquina_telefono",name:"maquina_telefono"}],buttons:[{text:'<i class="fa fa-plus"></i> Nueva máquina',className:"btn-sm",action:function(e,i,n,a){t.Misc.redirect(t.Misc.urlFull(Route.route("maquinas.create")))}}],columnDefs:[{targets:0,render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("maquinas.show",{maquinas:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.CreateRolView=Backbone.View.extend({el:"#rol-create",template:_.template(e("#add-rol-tpl").html()||""),events:{"submit #form-roles":"onStore"},initialize:function(){this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var e=this.model.toJSON();e.edit=!1,this.$el.html(this.template(e)),this.spinner=this.$("#spinner-main")},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.model.save(i,{patch:!0,silent:!0})}},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.spinner)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.spinner),!_.isUndefined(i.success)){var a=i.success?"":i.errors;if(_.isObject(i.errors)&&(a=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(a);Backbone.history.navigate(Route.route("roles.edit",{roles:i.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.CreatePermisoRolView=Backbone.View.extend({el:"#modal-permisorol-component",template:_.template(e("#edit-permissions-tpl").html()||""),events:{"submit #form-permisorol-component":"onStore"},parameters:{permissions:[],dataFilter:{}},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.$el.find(".inner-title-modal").empty().html(this.model.get("display_name")),this.$wraperContent=this.$el.find(".modal-body"),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var e=this.model.toJSON();return e.permissions=this.parameters.permissions,this.$el.find(".content-modal").empty().html(this.template(e)),this.ready(),this.$el.modal("show"),this},ready:function(){"function"==typeof t.initComponent.initICheck&&t.initComponent.initICheck()},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);i.role_id=this.parameters.dataFilter.role_id,this.model.save(i,{patch:!0})}},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.$wraperContent)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.$wraperContent),!_.isUndefined(i.success)){var a=i.success?"":i.errors;if(_.isObject(i.errors)&&(a=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(a);this.collection.fetch({data:this.parameters.dataFilter,reset:!0}),this.$el.modal("hide")}}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.EditRolView=Backbone.View.extend({el:"#rol-create",template:_.template(e("#add-rol-tpl").html()||""),events:{"submit #form-roles":"onStore","click .btn-set-permission":"changePermissions"},parameters:{},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},render:function(){var e=this.model.toJSON();e.edit=!0,this.$el.html(this.template(e)),this.spinner=this.$("#spinner-main"),this.referencesView()},referencesView:function(){this.collection=new app.PermisosRolList,this.stufView=new app.PermisosRolListView({el:"#permissions-browser",collection:this.collection,parameters:{permissions:this.model.get("permissions"),dataFilter:{role_id:this.model.get("id"),nivel1:0,nivel2:0}}})},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.model.save(i,{patch:!0,silent:!0})}},changePermissions:function(t){t.preventDefault();var i=e(t.currentTarget).attr("data-resource"),n=this.collection.get(i),a=this;this.createPermisoRolView instanceof Backbone.View&&(this.createPermisoRolView.stopListening(),this.createPermisoRolView.undelegateEvents()),this.createPermisoRolView=new app.CreatePermisoRolView({model:n,collection:a.collection,parameters:{permissions:this.model.get("permissions"),dataFilter:{role_id:this.model.get("id"),nivel1:n.get("nivel1"),nivel2:n.get("nivel2")}}}),this.createPermisoRolView.render()},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.spinner)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.spinner),!_.isUndefined(i.success)){var a=i.success?"":i.errors;if(_.isObject(i.errors)&&(a=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(a);t.Misc.redirect(t.Misc.urlFull(Route.route("roles.edit",{roles:i.id})))}}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainRolesView=Backbone.View.extend({el:"#roles-main",initialize:function(){this.$rolesSearchTable=this.$("#roles-search-table"),this.$rolesSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:t.Misc.urlFull(Route.route("roles.index")),columns:[{data:"display_name",name:"display_name"},{data:"name",name:"name"},{data:"description",name:"description"}],buttons:[{text:'<i class="fa fa-plus"></i> Nuevo rol',className:"btn-sm",action:function(e,i,n,a){t.Misc.redirect(t.Misc.urlFull(Route.route("roles.create")))}}],columnDefs:[{targets:0,width:"25%",render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("roles.show",{roles:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.PermisosRolItemView=Backbone.View.extend({tagName:"tr",template:_.template(e("#permissions-rol-list-tpl").html()||""),parameters:{father:null,permissions:[],edit:!1},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return e.edit=this.parameters.edit,e.father=this.parameters.father,e.permissions=this.parameters.permissions,this.$el.html(this.template(e)),this}})}(jQuery,0,this.document),app||(app={}),function(e,t,i,n){app.PermisosRolListView=Backbone.View.extend({events:{},parameters:{wrapper:null,father:null,edit:!1,permissions:[],dataFilter:{}},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:this.parameters.dataFilter,reset:!0})},render:function(){},addOne:function(e){var t=new app.PermisosRolItemView({model:e,parameters:{father:this.parameters.father,permissions:this.parameters.permissions,edit:this.parameters.edit}});e.view=t,this.$el.append(t.render().el)},addAll:function(){this.$el.find("tbody").html(""),this.collection.forEach(this.addOne,this)},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(e,i,n){t.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.CreateUserView=Backbone.View.extend({el:"#user-create",template:_.template(e("#add-user-tpl").html()||""),events:{"submit #form-user":"onStore","submit #form-item-roles":"onStoreRol"},initialize:function(){this.$wraperForm=this.$("#render-form-user"),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"sync",this.responseServer),this.listenTo(this.model,"request",this.loadSpinner)},referenceViews:function(){this.rolesListView=new app.RolesListView({collection:this.rolList,parameters:{edit:!0,wrapper:this.$("#wrapper-roles"),dataFilter:{user:this.model.get("id")}}})},onStore:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.model.save(i,{patch:!0,silent:!0})}},onStoreRol:function(e){if(!e.isDefaultPrevented()){e.preventDefault();var i=t.Misc.formToJson(e.target);this.rolList.trigger("store",i)}},render:function(){var e=this.model.toJSON();this.$wraperForm.html(this.template(e)),this.$password=this.$("#password"),this.$password_confirmation=this.$("#password_confirmation"),void 0!=this.model.id&&(this.rolList=new app.RolList,this.referenceViews()),this.ready()},ready:function(){"function"==typeof t.initComponent.initValidator&&t.initComponent.initValidator(),"function"==typeof t.initComponent.initToUpper&&t.initComponent.initToUpper(),"function"==typeof t.initComponent.initSpinner&&t.initComponent.initSpinner(),"function"==typeof t.initComponent.initSelect2&&t.initComponent.initSelect2()},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.el)},responseServer:function(e,i,n){if(t.Misc.removeSpinner(this.el),!_.isUndefined(i.success)){var a=i.success?"":i.errors;if(_.isObject(i.errors)&&(a=t.Misc.parseErrors(i.errors)),!i.success)return void alertify.error(a);this.$password.val(""),this.$password_confirmation.val(""),Backbone.history.navigate(Route.route("usuarios.edit",{usuarios:i.id}),{trigger:!0})}}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.MainUsersView=Backbone.View.extend({el:"#users-main",initialize:function(){this.$usersSearchTable=this.$("#users-search-table"),this.$usersSearchTable.DataTable({dom:"<'row'<'col-sm-4'B><'col-sm-4 text-center'l><'col-sm-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",processing:!0,serverSide:!0,language:t.Misc.dataTableES(),ajax:{url:t.Misc.urlFull(Route.route("usuarios.index")),data:function(e){e.datatables=!0}},columns:[{data:"id",name:"id"},{data:"user_name",name:"user_name"},{data:"user_email",name:"user_email"},{data:"user_telephone",name:"user_telephone"}],buttons:[{text:'<i class="fa fa-plus"></i> Nuevo usuario',className:"btn-sm",action:function(e,i,n,a){t.Misc.redirect(t.Misc.urlFull(Route.route("usuarios.create")))}}],columnDefs:[{targets:0,render:function(e,i,n,a){return'<a href="'+t.Misc.urlFull(Route.route("usuarios.show",{usuarios:n.id}))+'">'+e+"</a>"}}]})}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.RolesListView=Backbone.View.extend({el:"#browse-roles-list",events:{"click .item-roles-remove":"removeOne"},parameters:{wrapper:null,edit:!1,dataFilter:{}},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.listenTo(this.collection,"add",this.addOne),this.listenTo(this.collection,"reset",this.addAll),this.listenTo(this.collection,"request",this.loadSpinner),this.listenTo(this.collection,"store",this.storeOne),this.listenTo(this.collection,"sync",this.responseServer),this.collection.fetch({data:{user:this.parameters.dataFilter.user},reset:!0})},render:function(){},addOne:function(e){var t=new app.RolItemView({model:e,parameters:{edit:this.parameters.edit}});console.log(this.$el),e.view=t,this.$el.prepend(t.render().el)},addAll:function(){this.collection.forEach(this.addOne,this)},storeOne:function(e){var i=this;t.Misc.setSpinner(this.parameters.wrapper),e.user_id=this.parameters.dataFilter.user,(new app.UsuarioRolModel).save(e,{success:function(e,n){if(!_.isUndefined(n.success)){t.Misc.removeSpinner(i.parameters.wrapper);var a=n.success?"":n.errors;if(_.isObject(n.errors)&&(a=t.Misc.parseErrors(n.errors)),!n.success)return void alertify.error(a);i.collection.add(e)}},error:function(e,n){t.Misc.removeSpinner(i.parameters.wrapper),alertify.error(n.statusText)}})},removeOne:function(i){i.preventDefault();var n=e(i.currentTarget).attr("data-resource"),a=this.collection.get(n),o=this;a instanceof Backbone.Model&&a.destroy({data:{user_id:this.parameters.dataFilter.user},processData:!0,success:function(e,i){if(!_.isUndefined(i.success)){if(t.Misc.removeSpinner(o.parameters.wrapper),!i.success)return void alertify.error(i.errors);e.view.remove()}}})},loadSpinner:function(e,i,n){t.Misc.setSpinner(this.parameters.wrapper)},responseServer:function(e,i,n){t.Misc.removeSpinner(this.parameters.wrapper)}})}(jQuery,this,this.document),app||(app={}),function(e,t,i,n){app.RolItemView=Backbone.View.extend({tagName:"tr",template:_.template(e("#roles-item-list-tpl").html()||""),parameters:{edit:!1},initialize:function(t){void 0!==t&&_.isObject(t.parameters)&&(this.parameters=e.extend({},this.parameters,t.parameters)),this.listenTo(this.model,"change",this.render)},render:function(){var e=this.model.toJSON();return e.edit=this.parameters.edit,this.$el.html(this.template(e)),this}})}(jQuery,0,this.document),app||(app={}),function(e,t,i,n){app.ShowUserView=Backbone.View.extend({el:"#user-show",initialize:function(){void 0!=this.model.id&&(this.rolList=new app.RolList,this.referenceViews())},referenceViews:function(){this.rolesListView=new app.RolesListView({collection:this.rolList,parameters:{edit:!1,wrapper:this.$("#wrapper-roles"),dataFilter:{user:this.model.get("id")}}})}})}(jQuery,0,this.document),function(e,t,i,n){var a=function(e){};a.prototype={initialize:function(){},formToJson:function(t){var i={},n=[];return n=e.prototype.isPrototypeOf(t)?t.serializeArray():e(t).serializeArray(),e.each(n,function(){void 0!==i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i},isUrl:function(e){return/^(http[s]?:\/\/(www\.)?|ftp:\/\/(www\.)?|www\.){1}([0-9A-Za-z-\.@:%_\+~#=]+)+(\/(.)*)?(\?(.)*)?/i.test(e)},urlFull:function(e){return this.isUrl(i.url)?(e||(e=""),/^\//.test(e)||(e="/"+e),i.url+e):e},parseErrors:function(t){var i="";if(_.isObject(t)){var n="<ul>";e.each(t,function(e,t){n+="<li>"+t[0]+"</li>"}),n+="</ul>",i=n}return i},setSpinner:function(t){t&&e(t).prepend('<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>')},removeSpinner:function(t){var i=e(t).find(".overlay");i.length&&i.remove()},clearForm:function(t){t.trigger("reset"),t.find(":input").each(function(){if(field_type=e(this),""!=field_type.attr("data-currency")&&""!=field_type.attr("data-currency-negative")||field_type.val(""),field_type.hasClass("timepicker")&&field_type.val(moment().format("H:mm")),"radio"!=field_type.attr("type")&&"checkbox"!=field_type.attr("type")||field_type.iCheck("update"),field_type.hasClass("select2-default-clear")||field_type.hasClass("select2-default")){var t=field_type.attr("id");field_type.val("").trigger("change"),e("#select2-"+t+"-container").removeAttr("title")}else field_type.hasClass("choice-select-autocomplete")&&(field_type.empty(),id=field_type.attr("id"),e("#select2-"+id+"-container").removeAttr("title"))})},dataTableES:function(){return{sProcessing:'<div class="overlay"><i class="fa fa-refresh fa-spin"></i></div>',sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}},redirect:function(e){void 0!==e&&""!=e?t.location=e:t.location.reload()},successRedirect:function(e,i){alertify.success(e),setTimeout(function(){t.Misc.redirect(i)},500)},currency:function(e){return accounting.formatMoney(e,"",2,".",",")}},t.Misc=new a,t.Misc.initialize()}(jQuery,this,this.document),function(){var e=function(){var e={absolute:!1,rootUrl:"http://localhost",routes:[{host:null,methods:["GET","HEAD"],uri:"api/user",name:null,action:"Closure"},{host:null,methods:["POST"],uri:"auth/login",name:"auth.login",action:"AppHttpControllersAuthLoginController@postLogin"},{host:null,methods:["GET","HEAD"],uri:"auth/logout",name:"auth.logout",action:"AppHttpControllersAuthLoginController@logout"},{host:null,methods:["GET","HEAD"],uri:"auth/integrate",name:"auth.integrate",action:"AppHttpControllersAuthLoginController@integrate"},{host:null,methods:["GET","HEAD"],uri:"login",name:"login",action:"AppHttpControllersAuthLoginController@showLoginForm"},{host:null,methods:["GET","HEAD"],uri:"charts",name:"dashboard.charts",action:"AppHttpControllersHomeController@charts"},{host:null,methods:["GET","HEAD"],uri:"/",name:"dashboard",action:"AppHttpControllersHomeController@index"},{host:null,methods:["GET","HEAD"],uri:"usuarios/roles",name:"usuarios.roles.index",action:"AppHttpControllersAdminUsuarioRolController@index"},{host:null,methods:["POST"],uri:"usuarios/roles",name:"usuarios.roles.store",action:"AppHttpControllersAdminUsuarioRolController@store"},{host:null,methods:["DELETE"],uri:"usuarios/roles/{roles}",name:"usuarios.roles.destroy",action:"AppHttpControllersAdminUsuarioRolController@destroy"},{host:null,methods:["GET","HEAD"],uri:"roles/permisos",name:"roles.permisos.index",action:"AppHttpControllersAdminPermisoRolController@index"},{host:null,methods:["PUT","PATCH"],uri:"roles/permisos/{permisos}",name:"roles.permisos.update",action:"AppHttpControllersAdminPermisoRolController@update"},{host:null,methods:["DELETE"],uri:"roles/permisos/{permisos}",name:"roles.permisos.destroy",action:"AppHttpControllersAdminPermisoRolController@destroy"},{host:null,methods:["GET","HEAD"],uri:"roles",name:"roles.index",action:"AppHttpControllersAdminRolController@index"},{host:null,methods:["GET","HEAD"],uri:"roles/create",name:"roles.create",action:"AppHttpControllersAdminRolController@create"},{host:null,methods:["POST"],uri:"roles",name:"roles.store",action:"AppHttpControllersAdminRolController@store"},{host:null,methods:["GET","HEAD"],uri:"roles/{roles}",name:"roles.show",action:"AppHttpControllersAdminRolController@show"},{host:null,methods:["GET","HEAD"],uri:"roles/{roles}/edit",name:"roles.edit",action:"AppHttpControllersAdminRolController@edit"},{host:null,methods:["PUT","PATCH"],uri:"roles/{roles}",name:"roles.update",action:"AppHttpControllersAdminRolController@update"},{host:null,methods:["GET","HEAD"],uri:"usuarios",name:"usuarios.index",action:"AppHttpControllersAdminUserController@index"},{host:null,methods:["GET","HEAD"],uri:"usuarios/create",name:"usuarios.create",action:"AppHttpControllersAdminUserController@create"},{host:null,methods:["POST"],uri:"usuarios",name:"usuarios.store",action:"AppHttpControllersAdminUserController@store"},{host:null,methods:["GET","HEAD"],uri:"usuarios/{usuarios}",name:"usuarios.show",action:"AppHttpControllersAdminUserController@show"},{host:null,methods:["GET","HEAD"],uri:"usuarios/{usuarios}/edit",name:"usuarios.edit",action:"AppHttpControllersAdminUserController@edit"},{host:null,methods:["PUT","PATCH"],uri:"usuarios/{usuarios}",name:"usuarios.update",action:"AppHttpControllersAdminUserController@update"},{host:null,methods:["GET","HEAD"],uri:"maquinas",name:"maquinas.index",action:"AppHttpControllersAdminMaquinaController@index"},{host:null,methods:["GET","HEAD"],uri:"maquinas/create",name:"maquinas.create",action:"AppHttpControllersAdminMaquinaController@create"},{host:null,methods:["POST"],uri:"maquinas",name:"maquinas.store",action:"AppHttpControllersAdminMaquinaController@store"},{host:null,methods:["GET","HEAD"],uri:"maquinas/{maquinas}",name:"maquinas.show",action:"AppHttpControllersAdminMaquinaController@show"},{host:null,methods:["GET","HEAD"],uri:"maquinas/{maquinas}/edit",name:"maquinas.edit",action:"AppHttpControllersAdminMaquinaController@edit"},{host:null,methods:["PUT","PATCH"],uri:"maquinas/{maquinas}",name:"maquinas.update",action:"AppHttpControllersAdminMaquinaController@update"},{host:null,methods:["GET","HEAD"],uri:"bitacoras",name:"bitacoras.index",action:"AppHttpControllersAdminBitacoraController@index"},{host:null,methods:["GET","HEAD"],uri:"bitacoras/create",name:"bitacoras.create",action:"AppHttpControllersAdminBitacoraController@create"},{host:null,methods:["POST"],uri:"bitacoras",name:"bitacoras.store",action:"AppHttpControllersAdminBitacoraController@store"},{host:null,methods:["GET","HEAD"],uri:"bitacoras/{bitacoras}",name:"bitacoras.show",action:"AppHttpControllersAdminBitacoraController@show"},{host:null,methods:["GET","HEAD"],uri:"bitacoras/{bitacoras}/edit",name:"bitacoras.edit",
action:"AppHttpControllersAdminBitacoraController@edit"},{host:null,methods:["PUT","PATCH"],uri:"bitacoras/{bitacoras}",name:"bitacoras.update",action:"AppHttpControllersAdminBitacoraController@update"},{host:null,methods:["GET","HEAD"],uri:"facturas",name:"facturas.index",action:"AppHttpControllersAdminFacturaController@index"},{host:null,methods:["GET","HEAD"],uri:"facturas/create",name:"facturas.create",action:"AppHttpControllersAdminFacturaController@create"},{host:null,methods:["POST"],uri:"facturas",name:"facturas.store",action:"AppHttpControllersAdminFacturaController@store"},{host:null,methods:["GET","HEAD"],uri:"facturas/{facturas}",name:"facturas.show",action:"AppHttpControllersAdminFacturaController@show"},{host:null,methods:["GET","HEAD"],uri:"facturas/{facturas}/edit",name:"facturas.edit",action:"AppHttpControllersAdminFacturaController@edit"},{host:null,methods:["PUT","PATCH"],uri:"facturas/{facturas}",name:"facturas.update",action:"AppHttpControllersAdminFacturaController@update"},{host:null,methods:["GET","HEAD"],uri:"monedas",name:"monedas.index",action:"AppHttpControllersAdminCoinController@index"},{host:null,methods:["GET","HEAD"],uri:"monedas/create",name:"monedas.create",action:"AppHttpControllersAdminCoinController@create"},{host:null,methods:["POST"],uri:"monedas",name:"monedas.store",action:"AppHttpControllersAdminCoinController@store"},{host:null,methods:["GET","HEAD"],uri:"monedas/{monedas}",name:"monedas.show",action:"AppHttpControllersAdminCoinController@show"},{host:null,methods:["GET","HEAD"],uri:"monedas/{monedas}/edit",name:"monedas.edit",action:"AppHttpControllersAdminCoinController@edit"},{host:null,methods:["PUT","PATCH"],uri:"monedas/{monedas}",name:"monedas.update",action:"AppHttpControllersAdminCoinController@update"},{host:null,methods:["GET","HEAD"],uri:"finalizados",name:"finalizados.index",action:"AppHttpControllersAdminFinalizedController@index"},{host:null,methods:["GET","HEAD"],uri:"finalizados/create",name:"finalizados.create",action:"AppHttpControllersAdminFinalizedController@create"},{host:null,methods:["POST"],uri:"finalizados",name:"finalizados.store",action:"AppHttpControllersAdminFinalizedController@store"},{host:null,methods:["GET","HEAD"],uri:"finalizados/{finalizados}",name:"finalizados.show",action:"AppHttpControllersAdminFinalizedController@show"},{host:null,methods:["GET","HEAD"],uri:"finalizados/{finalizados}/edit",name:"finalizados.edit",action:"AppHttpControllersAdminFinalizedController@edit"},{host:null,methods:["PUT","PATCH"],uri:"finalizados/{finalizados}",name:"finalizados.update",action:"AppHttpControllersAdminFinalizedController@update"},{host:null,methods:["GET","HEAD"],uri:"monedascofres",name:"monedascofres.index",action:"AppHttpControllersAdminCoinsCasketController@index"},{host:null,methods:["GET","HEAD"],uri:"monedascofres/create",name:"monedascofres.create",action:"AppHttpControllersAdminCoinsCasketController@create"},{host:null,methods:["POST"],uri:"monedascofres",name:"monedascofres.store",action:"AppHttpControllersAdminCoinsCasketController@store"},{host:null,methods:["GET","HEAD"],uri:"monedascofres/{monedascofres}",name:"monedascofres.show",action:"AppHttpControllersAdminCoinsCasketController@show"},{host:null,methods:["GET","HEAD"],uri:"monedascofres/{monedascofres}/edit",name:"monedascofres.edit",action:"AppHttpControllersAdminCoinsCasketController@edit"},{host:null,methods:["PUT","PATCH"],uri:"monedascofres/{monedascofres}",name:"monedascofres.update",action:"AppHttpControllersAdminCoinsCasketController@update"},{host:null,methods:["GET","HEAD"],uri:"resumengeneral",name:"resumengeneral.index",action:"AppHttpControllersReportResumenGeneralController@index"}],prefix:"",route:function(e,t,i){if(i=i||this.getByName(e))return this.toRoute(i,t)},url:function(e,t){t=t||[];var i=e+"/"+t.join("/");return this.getCorrectUrl(i)},toRoute:function(e,t){var i=this.replaceNamedParameters(e.uri,t),n=this.getRouteQueryString(t);return this.absolute&&this.isOtherHost(e)?"//"+e.host+"/"+i+n:this.getCorrectUrl(i+n)},isOtherHost:function(e){return e.host&&e.host!=window.location.hostname},replaceNamedParameters:function(e,t){return e=e.replace(/\{(.*?)\??\}/g,function(e,i){if(t.hasOwnProperty(i)){var n=t[i];return delete t[i],n}return e}),e=e.replace(/\/\{.*?\?\}/g,"")},getRouteQueryString:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+"="+e[i]);return t.length<1?"":"?"+t.join("&")},getByName:function(e){for(var t in this.routes)if(this.routes.hasOwnProperty(t)&&this.routes[t].name===e)return this.routes[t]},getByAction:function(e){for(var t in this.routes)if(this.routes.hasOwnProperty(t)&&this.routes[t].action===e)return this.routes[t]},getCorrectUrl:function(e){var t=this.prefix+"/"+e.replace(/^\/?/,"");return this.absolute?this.rootUrl.replace("//?$/","")+t:t}},t=function(e){if(!e)return"";var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+'="'+e[i]+'"');return t.join(" ")},i=function(e,i,n){return i=i||e,n=t(n),'<a href="'+e+'" '+n+">"+i+"</a>"};return{action:function(t,i){return i=i||{},e.route(t,i,e.getByAction(t))},route:function(t,i){return i=i||{},e.route(t,i)},url:function(t,i){return i=i||{},e.url(t,i)},link_to:function(e,t,n){return e=this.url(e),i(e,t,n)},link_to_route:function(e,t,n,a){var o=this.route(e,n);return i(o,t,a)},link_to_action:function(e,t,n,a){var o=this.action(e,n);return i(o,t,a)}}}.call(this);"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:window.Route=e}.call(this),app||(app={}),function(e,t,i,n){app.AppRouter=new(Backbone.Router.extend({routes:{"login(/)":"getLogin","(/)":"getDashboard","roles(/)":"getRolesMain","roles/create(/)":"getRolesCreate","roles/:rol/edit(/)":"getRolesEdit","usuarios(/)":"getUsersMain","usuarios/create(/)":"getUserCreate","usuarios/:ususarios(/)":"getUserShow","usuarios/:usuarios/edit(/)":"getUserEdit","maquinas(/)":"getMachinesMain","maquinas/create(/)":"getMachineCreate","maquinas/:maquinas/edit(/)":"getMachineEdit","facturas(/)":"getBillsMain","bitacoras(/)":"getBinnaclesMain","monedas(/)":"getCoinsMain","finalizados(/)":"getFinishedMain","monedascofres(/)":"getCoinsCasketMain"},parseQueryString:function(e){var t={};return e&&_.each(_.map(decodeURI(e).split(/&/g),function(e,t){var i=e.split("="),n={};if(i.length>=1){var a=void 0;2==i.length&&(a=i[1]),n[i[0]]=a}return n}),function(e){_.extend(t,e)}),t},initialize:function(e){this.componentGlobalView=new app.ComponentGlobalView,this.componentReportView=new app.ComponentReportView},start:function(){var e={pushState:!0};"-1"!=i.domain.search(/(104.236.57.82|localhost)/gi)&&(e.root="/SSSmartAPP/public/"),Backbone.history.start(e)},getDashboard:function(){this.dashboardView instanceof Backbone.View&&(this.dashboardView.stopListening(),this.dashboardView.undelegateEvents()),this.dashboardView=new app.DashboardView},getLogin:function(){this.loginView instanceof Backbone.View&&(this.loginView.stopListening(),this.loginView.undelegateEvents()),this.loginView=new app.UserLoginView},getRolesMain:function(){this.mainRolesView instanceof Backbone.View&&(this.mainRolesView.stopListening(),this.mainRolesView.undelegateEvents()),this.mainRolesView=new app.MainRolesView},getRolesCreate:function(){this.rolModel=new app.RolModel,this.createRolView instanceof Backbone.View&&(this.createRolView.stopListening(),this.createRolView.undelegateEvents()),this.createRolView=new app.CreateRolView({model:this.rolModel}),this.createRolView.render()},getRolesEdit:function(e){this.rolModel=new app.RolModel,this.rolModel.set({id:e},{silent:!0}),this.editRolView instanceof Backbone.View&&(this.editRolView.stopListening(),this.editRolView.undelegateEvents()),this.createRolView instanceof Backbone.View&&(this.createRolView.stopListening(),this.createRolView.undelegateEvents()),this.editRolView=new app.EditRolView({model:this.rolModel}),this.rolModel.fetch()},getUsersMain:function(){this.mainUsersView instanceof Backbone.View&&(this.mainUsersView.stopListening(),this.mainUsersView.undelegateEvents()),this.mainUsersView=new app.MainUsersView},getUserCreate:function(){this.userModel=new app.UserModel,this.createUserView instanceof Backbone.View&&(this.createUserView.stopListening(),this.createUserView.undelegateEvents()),this.createUserView=new app.CreateUserView({model:this.userModel}),this.createUserView.render()},getUserShow:function(e){this.userModel=new app.UserModel,this.userModel.set({id:e},{silent:!0}),this.showUserView instanceof Backbone.View&&(this.showUserView.stopListening(),this.showUserView.undelegateEvents()),this.showUserView=new app.ShowUserView({model:this.userModel})},getUserEdit:function(e){this.userModel=new app.UserModel,this.userModel.set({id:e},{silent:!0}),this.createUserView instanceof Backbone.View&&(this.createUserView.stopListening(),this.createUserView.undelegateEvents()),this.createUserView=new app.CreateUserView({model:this.userModel}),this.userModel.fetch()},getMachinesMain:function(){this.mainMachinesView instanceof Backbone.View&&(this.mainMachinesView.stopListening(),this.mainMachinesView.undelegateEvents()),this.mainMachinesView=new app.MainMachinesView},getMachineCreate:function(){this.machineModel=new app.MachineModel,this.createMachineView instanceof Backbone.View&&(this.createMachineView.stopListening(),this.createMachineView.undelegateEvents()),this.createMachineView=new app.CreateMachineView({model:this.machineModel}),this.createMachineView.render()},getMachineEdit:function(e){this.machineModel=new app.MachineModel,this.machineModel.set({id:e},{silent:!0}),this.createMachineView instanceof Backbone.View&&(this.createMachineView.stopListening(),this.createMachineView.undelegateEvents()),this.createMachineView=new app.CreateMachineView({model:this.machineModel}),this.machineModel.fetch()},getBillsMain:function(){this.mainBillsView instanceof Backbone.View&&(this.mainBillsView.stopListening(),this.mainBillsView.undelegateEvents()),this.mainBillsView=new app.MainBillsView},getBinnaclesMain:function(){this.mainBinnaclesView instanceof Backbone.View&&(this.mainBinnaclesView.stopListening(),this.mainBinnaclesView.undelegateEvents()),this.mainBinnaclesView=new app.MainBinnaclesView},getCoinsMain:function(){this.mainCoinsView instanceof Backbone.View&&(this.mainCoinsView.stopListening(),this.mainCoinsView.undelegateEvents()),this.mainCoinsView=new app.MainCoinsView},getFinishedMain:function(){this.mainFinishedView instanceof Backbone.View&&(this.mainFinishedView.stopListening(),this.mainFinishedView.undelegateEvents()),this.mainFinishedView=new app.MainFinishedView},getCoinsCasketMain:function(){this.mainCoinsCasketView instanceof Backbone.View&&(this.mainCoinsCasketView.stopListening(),this.mainCoinsCasketView.undelegateEvents()),this.mainCoinsCasketView=new app.MainCoinsCasketView}}))}(jQuery,0,this.document);var app=app||{};!function(e,t,i,n){var a=function(){e.ajaxSetup({cache:!1,headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}})};String.prototype.replaceAll=function(e,t){return t?this.replace(new RegExp("["+e+"]","g"),t):this},a.prototype={initialize:function(){this.initApp(),this.initICheck(),this.initAlertify(),this.initSelect2(),this.initSelectFile(),this.initToUpper(),this.initSpinner(),this.initInputMask(),this.initDatePicker(),this.initTimePicker()},initApp:function(){t.app.AppRouter.start()},initICheck:function(){e("input").iCheck({checkboxClass:"icheckbox_minimal-green",radioClass:"iradio_minimal-green"})},initAlertify:function(){alertify.logPosition("bottom right")},initSelect2:function(){var t={".select2-default":{language:"es",placeholder:"Seleccione",allowClear:!1},".select2-default-clear":{language:"es",placeholder:"Seleccione",allowClear:!0},".choice-select-autocomplete":{language:"es",placeholder:"Seleccione una opción",ajax:{delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return t.page=t.page||1,{results:e,pagination:{more:30*t.page<e.total_count}}},escapeMarkup:function(e){return e},cache:!0,minimumInputLength:1}}};for(var i in t)e(i).each(function(n,a){var o=e(a);if(void 0==o.data("select2")&&(o.select2(t[i]),".choice-select-autocomplete"==i)){var s=o.data("initial-value"),r=null;if(s){var l=o.data("select2").dataAdapter.ajaxOptions;r=e("<option selected>Cargando...</option>").val(s),o.append(r).trigger("change"),e.get(l.url,{id:s},function(e){r.text(e[0].text).val(e[0].id),r.removeData(),o.trigger("change")})}}})},initToUpper:function(){e(".input-toupper").change(function(){e(this).val(e(this).val().toUpperCase())}),e(".input-lower").change(function(){for(var t=e(this).val(e(this).val().toLowerCase()),i=/[^a-z0-9]/i,n="",a=0;a<=t.val().length-1;a++)i.test(t.val().charAt(a))||(t.val().replace(i,""),n+=t.val().charAt(a));e(this).val(n)})},initSelectFile:function(){e(".selectfile").change(function(){var t=e(this).val().replace(/\\/g,"/").replace(/.*\//,"");e(this).parents(".input-group").find(":text").val(t)})},initSpinner:function(){e(".spinner-percentage").spinner({step:.1,start:0,min:0,max:100,numberFormat:"n",stop:function(t,i){_.isNull(this.value)||_.isUndefined(this.value)||_.isEmpty(this.value)||(!e.isNumeric(this.value)||this.value>100||this.value<0)&&e(this).spinner("value",0)}})},initInputMask:function(){e("[data-mask]").inputmask()},initValidator:function(){e('form[data-toggle="validator"]').each(function(){var t=e(this);e.fn.validator.call(t,t.data())})},initDatePicker:function(){e(".datepicker").datepicker({autoclose:!0,language:"es",format:"yyyy-mm-dd"})},initTimePicker:function(){e(".timepicker").timepicker({showInputs:!1,showMeridian:!1,minuteStep:1})}},e(function(){t.initComponent=new a,t.initComponent.initialize()})}(jQuery,this,this.document);